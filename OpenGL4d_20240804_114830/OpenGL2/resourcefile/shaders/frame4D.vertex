#version 440
layout (location = 0) in vec4 line_position4D;
out float vs_distance;
out vec4 vs_direction4D;
uniform mat4 mesh4DMat,viewMat,projectionMat;
uniform vec4 Translate4D;
uniform vec4 cameraPos;
vec4 rPos0;
void main()
{
rPos0=viewMat*(Translate4D-cameraPos+mesh4DMat*line_position4D+0.005f*normalize(transpose(inverse(mesh4DMat))*line_position4D));
vs_distance=rPos0.w;
vs_direction4D=vec4(0.f,0.f,0.f,1.f)*viewMat;
gl_Position = projectionMat*vec4(rPos0.xyz,1.f);
};